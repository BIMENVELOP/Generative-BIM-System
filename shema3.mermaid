graph TD
    classDef element fill:#ffe0f0,stroke:#880e4f,stroke-width:1px;
    classDef relation fill:#e0f7fa,stroke:#006064,stroke-width:1px;
    classDef gnn fill:#d1c4e9,stroke:#311b92,stroke-width:2px;

    subgraph IFCModel [IFC-модель здания]
        direction LR
        Wall1("Стена (узел)"):::element
        Wall2("Стена (узел)"):::element
        Slab("Перекрытие (узел)"):::element
        Window("Окно (узел)"):::element
        
        Wall1 -- "Связь (опора)" --> Slab
        Wall2 -- "Связь (опора)" --> Slab
        Wall1 -- "Связь (примыкание)" --> Wall2
        Window -- "Связь (проем)" --> Wall1
    end

    subgraph GNN_Layer [Слой Graph Attention Network (GAT)]
        direction TB
        GNN1["Вход: Атрибуты узлов<br/>(тип, материал, координаты)"]:::gnn
        GNN2["Механизм Self-Attention<br/>(Расчет весов связей)"]:::gnn
        GNN3["Message Passing<br/>(Агрегация информации от соседей)"]:::gnn
        GNN4["Выход: Обновленные узлы<br/>(с учетом контекста)"]:::gnn
        
        GNN1 --> GNN2 --> GNN3 --> GNN4
    end

    IFCModel -- "Преобразование<br/>IFC -> Граф" --> GNN1
    GNN4 --> NextLayer["Следующий слой GNN<br/>или Cross-Modal Attention"]